# Backend

Deployed at: https://shnt.herokuapp.com/

## Schemas

**Users**

```js
{
    id: 1, // unique integer generated by the database (Should not be provided by frontend)
    username: "Jim", // unique string provided by client
    password: "pass" // string provided by client and stored as hash in db
}
```

**Comments**

May change as we learn more about DS API implementation

```js
{
    id: 1, // unique integer generated by the DS API (Must be provided by frontend to web API on POST)
    user: "hackerman", // string representing user who posted the comment
    comment: "Hack the planet!", // string representing content of comment
    sentiment: 0.41 // decimal representing the analysed sentiment of the comment
}
```

## Endpoints

**Auth**

- `POST /api/auth/register`:

  - Takes a user object to add to database
  - Returns id and username of newly created user
  - Returns 400 error if user object does not match schema

- `POST /api/auth/login`:
  - Takes a user object
  - Returns a JWT if authenticated
  - Returns 401 error if not authenticated

**Users**

All user routes require valid JWT in auth header

- `GET /api/users`:
  - Returns an array of user objects containing id and username

**Comments**

Comment routes other than /all require valid JWT in auth header

- `GET /api/comments/all`:

  - Not a replacement for DS API, just sample data until we can access theirs
  - Returns an array of all comments saved to backend

- `GET /api/comments`:

  - Returns an array of comments saved by the authenticated user
  - Returns 401 error if not authenticated

- `POST /api/comments`:

  - Takes a comment object
  - Saves the comment to the authenticated user's list of saved comments
  - Returns the saved comment
  - Returns 401 error if not authenticated
  - Returns 400 error if comment object does not match schema

- `DELETE /api/comments/:id`:
  - Takes comment id as URL param
  - Removes comment from authenticated user's list of saved comments
  - Returns the deleted comment
  - Returns 401 error if not authenticated
  - Returns 404 error if comment with specified id does not exist
